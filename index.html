<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<script>
      window.onload = function(){
		 // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        // container for header
				
		let	inbox = window.geemails;

				function showHide2(){
					let newContentMessage = this.querySelectorAll('.newMessageContent')[0];
					if (newContentMessage.style.display === 'block'){
						newContentMessage.style.display = 'none';
					} else {
						newContentMessage.style.display = 'block';
					}
				}
				
				let intervalID = setInterval(newMessage, 400);
								
				function newMessage(){
				let nuNuNews = getNewMessage();
				newCount++
				newBod = nuNuNews.body;
				newSub = nuNuNews.subject
				newDate = nuNuNews.date
				newSend = nuNuNews.sender
				
				
				let newMessageHeader = document.createElement('div');
				newMessageHeader.className = 'newHead';
				document.body.appendChild(newMessageHeader)

				let newDateElem = document.createElement('div');
				newDateElem.className = 'newDate';
				newDateElem.innerHTML = 'Date: ' + newDate;
				newMessageHeader.appendChild(newDateElem);

				let newSendElem = document.createElement('div');
				newSendElem.className = 'newSend';
				newSendElem.innerHTML = 'From: ' + newSend;
				newMessageHeader.appendChild(newSendElem);

				let newSubElem = document.createElement('div');
				newSubElem.className = 'newSub';
				newSubElem.innerHTML = 'Subject: ' + newSub;
				newMessageHeader.appendChild(newSubElem);
				
				let newContentButton = document.createElement('div');
					newContentButton.className = 'newContent';
					newContentButton.innerHTML = 'Show';
					newContentButton.addEventListener('click', showHide2)
					document.body.appendChild(newContentButton);

					let newMessageElem = document.createElement('div');
					newMessageElem.className = 'newMessageContent';
					newContentButton.appendChild(newMessageElem);

					let newBodyElem = document.createElement('div');
					newBodyElem.className = 'newBody';
					newBodyElem.innerHTML = 'Body: ' + newBod;
					newMessageElem.appendChild(newBodyElem);

					inboxCounter.innerHTML = 'Inbox: ' + newCount;
					console.log(newCount)
					stop();
				}
				
				let pageTitle = document.createElement('title');
				pageTitle.innerHTML = 'Gee-Mail';
				document.body.appendChild(pageTitle)

				let headerBox = document.createElement('h1');
				headerBox.id = 'header';
				headerBox.innerHTML = 'Knw D Waz';
				document.body.appendChild(headerBox);		
				
				for (i=0;i<inbox.length;i++){
					let message = inbox[i];
					let messageSubj = message.subject;
					let messageSender = message.sender;
					let messageBody = message.body;
					let messageDate = message.date;

					let messageHeader = document.createElement('div');
					messageHeader.className = 'messageHeader';
					document.body.appendChild(messageHeader)
					
					let dateElem = document.createElement('div');
					dateElem.className = 'date';
					dateElem.innerHTML = 'Date: ' + messageDate;
					messageHeader.appendChild(dateElem);

					let senderElem = document.createElement('div');
					senderElem.className = 'sender';
					senderElem.innerHTML = 'From: ' + messageSender;
					messageHeader.appendChild(senderElem)

					let subjectElem = document.createElement('div');
					subjectElem.className = 'subject';
					subjectElem.innerHTML = 'Subject: ' + messageSubj;
					messageHeader.appendChild(subjectElem)

					let contentButton = document.createElement('div');
					contentButton.className = 'content';
					contentButton.innerHTML = 'Show';
					document.body.appendChild(contentButton);

					let messageElem = document.createElement('div');
					messageElem.className = 'messageContent';
					contentButton.appendChild(messageElem);

					let bodyElem = document.createElement('div');
					bodyElem.className = 'body';
					bodyElem.innerHTML = 'Body: ' + messageBody;
					messageElem.appendChild(bodyElem);
				}
					let contentButton = document.getElementsByClassName('content')
					for(i=0;i<inbox.length;i++){
					contentButton[i].addEventListener('click', showHide);
					}

				function showHide(){
					let contentMessage = this.querySelectorAll('.messageContent')[0];
					if (contentMessage.style.display === 'block'){
						contentMessage.style.display = 'none';
					} else {
						contentMessage.style.display = 'block';
					}
				}
			
				let newCount = inbox.length;
				let inboxCounter = document.createElement('h4');
					inboxCounter.innerHTML = 'inbox: ' + newCount;
					headerBox.appendChild(inboxCounter)
		
			}
		</script>
	</head>
	<body>
	</body>
</html>